# DO NOT EDIT THIS FILE DIRECTLY!
#
# This file was generated by .github/workflows/templates/generate.py
#
# yamllint disable rule:line-length rule:empty-lines
---

name: Branch Testing

'on': [push]

jobs:

  py3-git-master-gentoo:
    name: Gentoo Master Py3 Git
    runs-on: ubuntu-latest
    timeout-minutes: 90



    steps:
      - uses: actions/checkout@v1
      - name: Setup Ruby
        uses: actions/setup-ruby@v1
        with:
          ruby-version: 2.6.x

      - name: Install Bundler
        run: |
          gem install bundler

      - name: Setup Bundle
        run: |
          bundle install --with docker --without opennebula ec2 windows vagrant

      - name: Set up Python 3.7
        uses: actions/setup-python@v1
        with:
          python-version: 3.7

      - name: Install Python Dependencies
        run: |
          pip install -U pip
          pip install -r tests/requirements.txt

      - name: Create Test Container
        run: |
          bundle exec kitchen create py3-git-master-gentoo || bundle exec kitchen create py3-git-master-gentoo

      - name: Test Bootstrap In Test Container
        run: |
          bundle exec kitchen verify py3-git-master-gentoo

      - name: Destroy Test Container
        if: always()
        run: |
          bundle exec kitchen destroy py3-git-master-gentoo


  latest-gentoo:
    name: Gentoo Latest packaged release
    runs-on: ubuntu-latest
    timeout-minutes: 90



    steps:
      - uses: actions/checkout@v1
      - name: Setup Ruby
        uses: actions/setup-ruby@v1
        with:
          ruby-version: 2.6.x

      - name: Install Bundler
        run: |
          gem install bundler

      - name: Setup Bundle
        run: |
          bundle install --with docker --without opennebula ec2 windows vagrant

      - name: Set up Python 3.7
        uses: actions/setup-python@v1
        with:
          python-version: 3.7

      - name: Install Python Dependencies
        run: |
          pip install -U pip
          pip install -r tests/requirements.txt

      - name: Create Test Container
        run: |
          bundle exec kitchen create latest-gentoo || bundle exec kitchen create latest-gentoo

      - name: Test Bootstrap In Test Container
        run: |
          bundle exec kitchen verify latest-gentoo

      - name: Destroy Test Container
        if: always()
        run: |
          bundle exec kitchen destroy latest-gentoo


  py3-git-master-gentoo-systemd:
    name: Gentoo (systemd) Master Py3 Git
    runs-on: ubuntu-latest
    timeout-minutes: 90



    steps:
      - uses: actions/checkout@v1
      - name: Setup Ruby
        uses: actions/setup-ruby@v1
        with:
          ruby-version: 2.6.x

      - name: Install Bundler
        run: |
          gem install bundler

      - name: Setup Bundle
        run: |
          bundle install --with docker --without opennebula ec2 windows vagrant

      - name: Set up Python 3.7
        uses: actions/setup-python@v1
        with:
          python-version: 3.7

      - name: Install Python Dependencies
        run: |
          pip install -U pip
          pip install -r tests/requirements.txt

      - name: Create Test Container
        run: |
          bundle exec kitchen create py3-git-master-gentoo-systemd || bundle exec kitchen create py3-git-master-gentoo-systemd

      - name: Test Bootstrap In Test Container
        run: |
          bundle exec kitchen verify py3-git-master-gentoo-systemd

      - name: Destroy Test Container
        if: always()
        run: |
          bundle exec kitchen destroy py3-git-master-gentoo-systemd


  latest-gentoo-systemd:
    name: Gentoo (systemd) Latest packaged release
    runs-on: ubuntu-latest
    timeout-minutes: 90



    steps:
      - uses: actions/checkout@v1
      - name: Setup Ruby
        uses: actions/setup-ruby@v1
        with:
          ruby-version: 2.6.x

      - name: Install Bundler
        run: |
          gem install bundler

      - name: Setup Bundle
        run: |
          bundle install --with docker --without opennebula ec2 windows vagrant

      - name: Set up Python 3.7
        uses: actions/setup-python@v1
        with:
          python-version: 3.7

      - name: Install Python Dependencies
        run: |
          pip install -U pip
          pip install -r tests/requirements.txt

      - name: Create Test Container
        run: |
          bundle exec kitchen create latest-gentoo-systemd || bundle exec kitchen create latest-gentoo-systemd

      - name: Test Bootstrap In Test Container
        run: |
          bundle exec kitchen verify latest-gentoo-systemd

      - name: Destroy Test Container
        if: always()
        run: |
          bundle exec kitchen destroy latest-gentoo-systemd
